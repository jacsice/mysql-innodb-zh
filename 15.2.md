## 15.2 InnoDB and the ACID Model

The [ACID](https://dev.mysql.com/doc/refman/8.0/en/glossary.html#glos_acid) model is a set of database design principles that emphasize aspects of reliability that are important for business data and mission-critical applications. MySQL includes components such as the `InnoDB` storage engine that adhere closely to the ACID model so that data is not corrupted and results are not distorted by exceptional conditions such as software crashes and hardware malfunctions. When you rely on ACID-compliant features, you do not need to reinvent the wheel of consistency checking and crash recovery mechanisms. In cases where you have additional software safeguards, ultra-reliable hardware, or an application that can tolerate a small amount of data loss or inconsistency, you can adjust MySQL settings to trade some of the ACID reliability for greater performance or throughput.

>ACID 模型是一系列强调可靠性的数据库设计原则，这些对业务数据和任务关键型应用程序很重要。 MySQL 包括 InnoDB 存储引擎等组件，与ACID 模型紧密相关，所以数据不会因软件崩溃和硬件故障等异常情况而丢失。当您依赖符合 ACID 的特性时，您不需要重新发明一致性检查和崩溃恢复机制的轮子。如果您有额外的软件保护措施、超可靠的硬件或可以容忍少量数据丢失或不一致的应用程序，您可以调整 MySQL 设置以牺牲一些 ACID 可靠性来获得更高的性能或吞吐量。

The following sections discuss how MySQL features, in particular the `InnoDB` storage engine, interact with the categories of the ACID model:

- **A**: atomicity.
- **C**: consistency.
- **I:**: isolation.
- **D**: durability.

### Atomicity

The **atomicity** aspect of the ACID model mainly involves `InnoDB` [transactions](https://dev.mysql.com/doc/refman/8.0/en/glossary.html#glos_transaction). Related MySQL features include:

> 主要涉及InnoDB事务

- The [`autocommit`](https://dev.mysql.com/doc/refman/8.0/en/server-system-variables.html#sysvar_autocommit) setting.
- The [`COMMIT`](https://dev.mysql.com/doc/refman/8.0/en/commit.html) statement.
- The [`ROLLBACK`](https://dev.mysql.com/doc/refman/8.0/en/commit.html) statement.

### Consistency

The **consistency** aspect of the ACID model mainly involves internal `InnoDB` processing to protect data from crashes. Related MySQL features include:

> 涉及InnoDB内部处理，以保护数据免受崩溃

- The `InnoDB` doublewrite buffer. 
- `InnoDB` crash recovery.

### Isolation

The **isolation** aspect of the ACID model mainly involves `InnoDB` [transactions](https://dev.mysql.com/doc/refman/8.0/en/glossary.html#glos_transaction), in particular the [isolation level](https://dev.mysql.com/doc/refman/8.0/en/glossary.html#glos_isolation_level) that applies to each transaction. Related MySQL features include:

> 主要涉及 InnoDB 事务，特别是适用于每个事务的隔离级别

- The [`autocommit`](https://dev.mysql.com/doc/refman/8.0/en/server-system-variables.html#sysvar_autocommit) setting.
- Transaction isolation levels and the [`SET TRANSACTION`](https://dev.mysql.com/doc/refman/8.0/en/set-transaction.html) statement. See [Section 15.7.2.1, “Transaction Isolation Levels”](https://dev.mysql.com/doc/refman/8.0/en/innodb-transaction-isolation-levels.html).
- The low-level details of `InnoDB` [locking](https://dev.mysql.com/doc/refman/8.0/en/glossary.html#glos_locking). Details can be viewed in the `INFORMATION_SCHEMA` tables (see [Section 15.15.2, “InnoDB INFORMATION_SCHEMA Transaction and Locking Information”](https://dev.mysql.com/doc/refman/8.0/en/innodb-information-schema-transactions.html)) and Performance Schema [`data_locks`](https://dev.mysql.com/doc/refman/8.0/en/performance-schema-data-locks-table.html) and [`data_lock_waits`](https://dev.mysql.com/doc/refman/8.0/en/performance-schema-data-lock-waits-table.html) tables.

> 锁的底层细节

### Durability

The **durability** aspect of the ACID model involves MySQL software features interacting with your particular hardware configuration. Because of the many possibilities depending on the capabilities of your CPU, network, and storage devices, this aspect is the most complicated to provide concrete guidelines for. (And those guidelines might take the form of “buy new hardware”.) Related MySQL features include:

> 持久性涉及MySQL 软件功能与硬件配置的交互 。由于 CPU、网络和存储设备的能力存在多种可能性，因此提供具体指导方针是最复杂的。 相关的 MySQL 功能包括：

- The `InnoDB` doublewrite buffer. See [Section 15.6.4, “Doublewrite Buffer”](https://dev.mysql.com/doc/refman/8.0/en/innodb-doublewrite-buffer.html).
- The [`innodb_flush_log_at_trx_commit`](https://dev.mysql.com/doc/refman/8.0/en/innodb-parameters.html#sysvar_innodb_flush_log_at_trx_commit) variable.
- The [`sync_binlog`](https://dev.mysql.com/doc/refman/8.0/en/replication-options-binary-log.html#sysvar_sync_binlog) variable.
- The [`innodb_file_per_table`](https://dev.mysql.com/doc/refman/8.0/en/innodb-parameters.html#sysvar_innodb_file_per_table) variable.
- The write buffer in a storage device, such as a disk drive, SSD, or RAID array.

> 存储设备中的写入缓冲区

- A battery-backed cache in a storage device.

> 电池备份缓存

- The operating system used to run MySQL, in particular its support for the `fsync()` system call.

> 用于运行 MySQL 的操作系统，特别是它对 fsync() 系统调用的支持。

- An uninterruptible power supply (UPS) protecting the electrical power to all computer servers and storage devices that run MySQL servers and store MySQL data.

> uninterruptible power supply (UPS) 保护运行 MySQL 服务器和存储 MySQL 数据的所有服务器和存储设备的电源。

- Your backup strategy, such as frequency and types of backups, and backup retention periods.

> 你的备份策略，例如备份的频率和备份类型以及备份保留周期。

- For distributed or hosted data applications, the particular characteristics of the data centers where the hardware for the MySQL servers is located, and network connections between the data centers.（？）